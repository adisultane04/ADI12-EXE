#include <iostream>
#include <cstdio>
#include <cstring>
using namespace std;

int main() {
    const char* code[9][4] = {
        {"PRG1", "START", "", ""},
        {"", "USING", "*", "15"},
        {"", "L", "", ""},
        {"", "A", "", ""},
        {"", "ST", "", ""},
        {"FOUR", "DC", "F", ""},
        {"FIVE", "DC", "1F", ""},
        {"TEMP", "DS", "1F", ""},
        {"", "END", "", ""}
    };

    char av[3], avail[16] = {'N','N','N','N','N','N','N','N',
                             'N','N','N','N','N','N','N','N'};
    int i, j, k, count[3], lc[9] = {0}, loc = 0;

    cout << "--------------------------------------------------------------\n";
    cout << "LABEL\t\tOPCODE\tOPERAND1\tOPERAND2\n";
    cout << "--------------------------------------------------------------\n";
    for (i = 0; i <= 8; i++) {
        for (j = 0; j <= 3; j++) {
            cout << code[i][j] << "\t\t";
        }
        cout << endl;
    }

    cin.get();

    cout << "\n--------------------------------------------------------------\n";
    cout << "VALUES FOR LC:\n";
    cout << "--------------------------------------------------------------\n";
    for (j = 0; j <= 8; j++) {
        if ((strcmp(code[j][1], "START") != 0) &&
            (strcmp(code[j][1], "USING") != 0) &&
            (strcmp(code[j][1], "L") != 0)) 
            lc[j] = lc[j-1] + 4;
        cout << lc[j] << "\t";
    }
    cout << endl;

    cout << "\n\n--------------------------------------------------------------\n";
    cout << "SYMBOL TABLE:\n";
    cout << "--------------------------------------------------------------\n";
    cout << "SYMBOL\tVALUE\tLENGTH\tR/A\n";
    cout << "--------------------------------------------------------------\n";

    loc = 0;
    for (i = 0; i < 9; i++) {
        if (strcmp(code[i][1], "START") == 0) {
            cout << code[i][0] << "\t\t" << loc << "\t\t" << "4" << "\t" << "R" << endl;
        }
        else if (strcmp(code[i][0], "") != 0) {
            cout << code[i][0] << "\t\t" << loc << "\t\t" << "4" << "\t" << "R" << endl;
            loc = 4 + loc;
        }
        else if (strcmp(code[i][1], "USING") == 0) {
        }
        else {
            loc = 4 + loc;
        }
    }
    cout << "--------------------------------------------------------------\n";

    cout << "\n\n--------------------------------------------------------------\n";
    cout << "BASE TABLE:\n";
    cout << "--------------------------------------------------------------\n";
    cout << "REG NO\tAVAILABILITY\n";
    cout << "--------------------------------------------------------------\n";

    for (j = 0; j <= 8; j++) {
        if (strcmp(code[j][1], "USING") != 0) {
        }
        else{
            strcpy(av, code[j][3]);
        }
    }

    count[0] = (int)av[0] - 48;
    count[1] = (int)av[1] - 48;
    count[2] = count[0] * 10 + count[1];
    avail[count[2]-1] = 'Y';

    for (k = 0; k < 16; k++) {
        cout << k << "\t\t" << avail[k-1] << endl;
    }

    cout << "--------------------------------------------------------------\n";
    cin.get();

    cout << "\n\nPASS2 TABLE:\n";
    cout << "--------------------------------------------------------------\n";
    cout << "LC\tLABEL\tOPCODE\tOPERAND1\tOPERAND2\n";
    cout << "--------------------------------------------------------------\n";

    for (i = 0; i <= 8; i++) {
        cout << lc[i] << "\t";
        for (j = 0; j <= 3; j++) {
            cout << code[i][j] << "\t\t";
        }
        cout << endl;
    }

    cout << "--------------------------------------------------------------\n";
    return 0;
}
